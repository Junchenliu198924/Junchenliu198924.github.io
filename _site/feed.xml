<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Supremeliu Blog</title>
    <description>techbolg record mylife</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml" />
    <pubDate>Sun, 12 Mar 2017 23:26:23 +0800</pubDate>
    <lastBuildDate>Sun, 12 Mar 2017 23:26:23 +0800</lastBuildDate>
    <generator>Jekyll v3.4.0</generator>
    
      <item>
        <title>java-web项目问题小结(4)</title>
        <description>&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;em&gt;今天开始实现对应的系统模块功能，还是碰到了不少的困难，有一些问题还是需要点耐心才能发现，好在今天的问题都已经解决，接下来会加快模块功能的开发速度&lt;/em&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;目录&quot;&gt;目录&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;1、&lt;a href=&quot;&quot;&gt;mybastis使用oracle和mysql之间的区别&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;2、&lt;a href=&quot;#build2&quot;&gt;本地虚拟机oracle连接缓慢问题的解决&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;3、&lt;a href=&quot;#build3&quot;&gt;抽象类在项目中运用实践&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;1mybastis使用oracle和mysql之间的区别&quot;&gt;1、mybastis使用oracle和mysql之间的区别&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;因为项目需要使用对应的数据库oracle来开发，所以要将原先的mysql数据库的东西迁移到oracle，因为东西也不多，主要是mapper的映射sql语句的修改。&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;迁移下来，发现了几个坑， 整理如下：&lt;/p&gt;

    &lt;p&gt;1）mysql 支持多路的执行select/dml(在url的后面添加参数allowMultiQueries=true) &lt;strong&gt;但是oracle不支持&lt;/strong&gt; 在一个标签内执行多条语句。
  2）mysql  mapper sql语句后面用  “;” 但是 oracle不需要“;” 如果写了“;”  执行就会报错&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p id=&quot;build2&quot;&gt;&lt;/p&gt;

&lt;h3 id=&quot;2本地虚拟机oracle连接缓慢问题的解决&quot;&gt;2、本地虚拟机oracle连接缓慢问题的解决&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;本地用vmware在自己的本地电脑搭建了一个oracle单点的环境， 起初java环境用oracle thin客户端连接的时候，每次大概需要一分钟才能建立正常的连接&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;网上找到了解决方案 把对应  vmware虚拟机的网络resolve.conf  清理下 （把里面dbs解析的内容清空一下即可），这样thin客户端就能够正常访问本地oracle数据库了。&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  enmoedu1*PROD1 ~ $ cat /etc/resolv.conf
  ; generated by /sbin/dhclient-script
  #search lan
  #nameserver 192.168.199.1
  enmoedu1*PROD1 ~ $
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p id=&quot;build3&quot;&gt;&lt;/p&gt;

&lt;h3 id=&quot;3抽象类在项目的运用实践&quot;&gt;3、抽象类在项目的运用实践&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;抽象类，今天我在项目中运用到了感觉主要益处在于能够让代码更加的简洁。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;我今天开发的模块的运维任务的模块，其中涉及到 db任务以及服务器任务 ，我抽象一个运维任务的（抽象父类） ，   分别让  db运维任务  和  服务器运维任务  来继承， 并且打算在service层统一对父类进行初始化。 这样非常清晰，这只是一个小小的实践，但是可以看出这种复用的思想对于写好代码是非常有帮助的。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

</description>
        <pubDate>Sun, 12 Mar 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/03/12/java-springmvc-note4/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/03/12/java-springmvc-note4/</guid>
        
        <category>spring</category>
        
        <category>java</category>
        
        <category>web</category>
        
        <category>js</category>
        
        
      </item>
    
      <item>
        <title>java-web项目问题小结(3)</title>
        <description>&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;em&gt;今天还是继续折腾项目的前段基础页面，总算把登录和功能模块完成，并且确定以后写功能模块页面的展示架构。以下是我对于今天碰到问题的解决总结。&lt;/em&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;目录&quot;&gt;目录&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;1、&lt;a href=&quot;&quot;&gt;用jquery局部加载登录页面&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;2、&lt;a href=&quot;#build2&quot;&gt;用jquery的cookie插件来实现“记住密码” 功能&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;3、&lt;a href=&quot;#build3&quot;&gt;quartz的定时任务的学习&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;1用jquery局部加载登录页面&quot;&gt;1、用jquery局部加载登录页面&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;主要思路就是运用jquery的局部onload的这个方法函数来实现对于主页面的特定div的重新加载，具体实现实现js如下：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; js：
 function loadConten(url) {
 //选取主要页面div对象重新加载新的页面地址
     $(&quot;div.page-content&quot;).load(url);
 }
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p id=&quot;build2&quot;&gt;&lt;/p&gt;

&lt;h3 id=&quot;2用jquery的cookie插件来实现记住密码-功能&quot;&gt;2、用jquery的cookie插件来实现“记住密码” 功能&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;在登录加载如下js内容：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  jQuery(document).ready(function() {
      Login.init();
      //初始化页时验证是否记住密码
      if ($.cookie(&quot;remember&quot;) == &quot;true&quot;) {
         /* $(&quot;input[name='remember']&quot;).attr(&quot;checked&quot;, true);
          $(&quot;input[name='username']&quot;).val($.cookie(&quot;userName&quot;));
          $(&quot;input[name='password']&quot;).val($.cookie(&quot;passWord&quot;));*/
          $(&quot;#remember&quot;).attr(&quot;checked&quot;, true);
          $(&quot;#realname&quot;).val($.cookie(&quot;userName&quot;));
          $(&quot;#realpassword&quot;).val($.cookie(&quot;passWord&quot;));
      }
  });
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;用jquery-cookie-js插件，在正常登陆后保存密码到cookie中去，实现的方法js如下：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  function saveUserInfo() {
  //$(&quot;&quot;).is(':checked')    选中的对象 如果type为checkbox，就可以用  jquery的is(':checked')	
          if ($(&quot;#remember&quot;).is(':checked') == true) {
          var userName = $(&quot;#realname&quot;).val();
          var passWord = $(&quot;#realpassword&quot;).val();
          $.cookie(&quot;remember&quot;, &quot;true&quot;, { expires: 7 }); // 存储一个带7天期限的 cookie
          $.cookie(&quot;userName&quot;, userName, { expires: 7 }); // 存储一个带7天期限的 cookie
          $.cookie(&quot;passWord&quot;, passWord, { expires: 7 }); // 存储一个带7天期限的 cookie
      }
      else {
          $.cookie(&quot;rmbUser&quot;, &quot;false&quot;, { expires: -1 });
          $.cookie(&quot;userName&quot;, '', { expires: -1 });
          $.cookie(&quot;passWord&quot;, '', { expires: -1 });
      }
  }
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p id=&quot;build3&quot;&gt;&lt;/p&gt;

&lt;h3 id=&quot;3quartz的定时任务学习&quot;&gt;3、quartz的定时任务学习&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;根据官方文档 如果你的项目也是用maven ，按照下面配置即可。&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.quartz-scheduler&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;quartz&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;2.2.1&amp;lt;/version&amp;gt;
    &amp;lt;/dependency&amp;gt;
    &amp;lt;dependency&amp;gt;
        &amp;lt;groupId&amp;gt;org.quartz-scheduler&amp;lt;/groupId&amp;gt;
        &amp;lt;artifactId&amp;gt;quartz-jobs&amp;lt;/artifactId&amp;gt;
        &amp;lt;version&amp;gt;2.2.1&amp;lt;/version&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;记一次简单的quartz任务，主要实例化过程如下：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;public class SimpleExample {
	
  public void run() throws Exception {
    Logger log = LoggerFactory.getLogger(SimpleExample.class);
	
    log.info(&quot;------- Initializing ----------------------&quot;);
	
    // First we must get a reference to a scheduler
    SchedulerFactory sf = new StdSchedulerFactory();
    Scheduler sched = sf.getScheduler();
	
    log.info(&quot;------- Initialization Complete -----------&quot;);
	
    // computer a time that is on the next round minute
    Date runTime = evenMinuteDate(new Date());
	
    log.info(&quot;------- Scheduling Job  -------------------&quot;);
	
    // define the job and tie it to our HelloJob class
    JobDetail job = newJob(HelloJob.class).withIdentity(&quot;job1&quot;, &quot;group1&quot;).build();
	
    // Trigger the job to run on the next round minute
    Trigger trigger = newTrigger().withIdentity(&quot;trigger1&quot;, &quot;group1&quot;).startAt(runTime).build();
	
    // Tell quartz to schedule the job using our trigger
    sched.scheduleJob(job, trigger);
    log.info(job.getKey() + &quot; will run at: &quot; + runTime);
	
    // Start up the scheduler (nothing can actually run until the
    // scheduler has been started)
    sched.start();
	
    log.info(&quot;------- Started Scheduler -----------------&quot;);
	
    // wait long enough so that the scheduler as an opportunity to
    // run the job!
    log.info(&quot;------- Waiting 65 seconds... -------------&quot;);
    try {
      // wait 65 seconds to show job
      Thread.sleep(65L * 1000L);
      // executing...
    } catch (Exception e) {
      //
    }
	
    // shut down the scheduler
    log.info(&quot;------- Shutting Down ---------------------&quot;);
    sched.shutdown(true);
    log.info(&quot;------- Shutdown Complete -----------------&quot;);
  }
	
  public static void main(String[] args) throws Exception {
	
    SimpleExample example = new SimpleExample();
    example.run();   }
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;

    &lt;p&gt;}&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;public HelloJob() {
}

/**
 * &amp;lt;p&amp;gt;
 * Called by the &amp;lt;code&amp;gt;{@link org.quartz.Scheduler}&amp;lt;/code&amp;gt; when a
 * &amp;lt;code&amp;gt;{@link org.quartz.Trigger}&amp;lt;/code&amp;gt; fires that is associated with
 * the &amp;lt;code&amp;gt;Job&amp;lt;/code&amp;gt;.
 * &amp;lt;/p&amp;gt;
 * 
 * @throws JobExecutionException
 *             if there is an exception while executing the job.
 */
public void execute(JobExecutionContext context)
    throws JobExecutionException {

    // Say Hello to the World and display the date/time
    _log.info(&quot;Hello World! - &quot; + new Date());
}
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;小结&quot;&gt;小结&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;js的jquery非常的好用，在我的项目中模块都需要和这个监控挂钩
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

</description>
        <pubDate>Tue, 07 Mar 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/03/07/java-springmvc-note3/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/03/07/java-springmvc-note3/</guid>
        
        <category>spring</category>
        
        <category>java</category>
        
        <category>web</category>
        
        <category>js</category>
        
        
      </item>
    
      <item>
        <title>java-web项目问题小结(2)</title>
        <description>&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;em&gt;今天在研究mybatis的数据映射文件mapper的写法，发现mybatis的映射非常的完善，也不是很难懂，因为可以自己写sql绑定自由度是非常高的，今天主要学习了下select的绑定。&lt;/em&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;
&lt;h3 id=&quot;1mybatis查询绑定内嵌对象注意要点&quot;&gt;1、mybatis查询绑定内嵌对象注意要点&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;spring中mybatis的配置文件：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &amp;lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
        xmlns:context=&quot;http://www.springframework.org/schema/context&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot;
        xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;
        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
        xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
     http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd
     http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd
     http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd&quot;&amp;gt;
	
     &amp;lt;bean class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&amp;gt;
         &amp;lt;!-- 数据源 --&amp;gt;
         &amp;lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&amp;gt;
         &amp;lt;!-- 配置Mybatis的全局配置文件 --&amp;gt;
         &amp;lt;property name=&quot;configLocation&quot; value=&quot;classpath:mybatis/mybatis-config.xml&quot;/&amp;gt;
         &amp;lt;!-- 配置mapper.xml文件 --&amp;gt;
          &amp;lt;property name=&quot;mapperLocations&quot; value=&quot;classpath:mybatis/mapper/*.xml&quot;/&amp;gt;
         &amp;lt;!-- 别名包 --&amp;gt;
         &amp;lt;property name=&quot;typeAliasesPackage&quot; value=&quot;com.bocim.maintaince.pojo&quot;/&amp;gt;
     &amp;lt;/bean&amp;gt;
     &amp;lt;!-- mapper接口的扫描器 --&amp;gt;
     &amp;lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&amp;gt;
         &amp;lt;property name=&quot;basePackage&quot; value=&quot;com.bocim.maintaince.mapper&quot;/&amp;gt;
     &amp;lt;/bean&amp;gt;
     &amp;lt;bean id=&quot;MUserDAO&quot; class=&quot;com.bocim.maintaince.dao.MUserDAO&quot;&amp;gt;&amp;lt;/bean&amp;gt;
 &amp;lt;/beans&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;创建对应的接口类后 (例如:MuserMapper)，接下来我们主要运用mapper将sql语句映射成java的对象，具体的用法请参考&lt;a href=&quot;http://www.mybatis.org/mybatis-3/index.html&quot;&gt;spring官方文档&lt;/a&gt;,下面是我要映射的java pojo类。&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; public class Muser {
     @Id
     @GeneratedValue(strategy = GenerationType.IDENTITY)
     private  Long id  ;
     private  String username    ;
     private  String password  ;
     private  String phone  ;
     private  String email  ;
     @JsonDeserialize(using = DateDeserializer.class)
     private Date createTime;//创建时间
     @JsonDeserialize(using = DateDeserializer.class)
     private Date updateTime;//更新时间
     private List&amp;lt;Userprivilege&amp;gt;   userprivileges  ;  //用户菜单权限
     .........
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;在对应的mapper文件中绑定对应sql语句。&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;cp&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;cp&quot;&gt;&amp;lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
          &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;mapper&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;namespace=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;com.bocim.maintaince.mapper.MuserMapper&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;c&quot;&gt;&amp;lt;!--可以引用的sql变量模板--&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;c&quot;&gt;&amp;lt;!--&amp;lt;sql id=&quot;tableName&quot;&amp;gt;maintaince_user&amp;lt;/sql&amp;gt;--&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;resultMap&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;pojoResultMap2&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Muser&quot;&lt;/span&gt;  &lt;span class=&quot;na&quot;&gt;autoMapping=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;true&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;column=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;property=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;nt&quot;&gt;&amp;lt;result&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;column=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;username&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;property=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;username&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;nt&quot;&gt;&amp;lt;collection&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;property=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;userprivileges&quot;&lt;/span&gt;   &lt;span class=&quot;na&quot;&gt;ofType=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Userprivilege&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
              &lt;span class=&quot;nt&quot;&gt;&amp;lt;id&lt;/span&gt;  &lt;span class=&quot;na&quot;&gt;property=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;moduleId&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;column=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;moduleid&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
              &lt;span class=&quot;nt&quot;&gt;&amp;lt;result&lt;/span&gt;  &lt;span class=&quot;na&quot;&gt;property=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;moduleName&quot;&lt;/span&gt;  &lt;span class=&quot;na&quot;&gt;column=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;modulename&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
              &lt;span class=&quot;nt&quot;&gt;&amp;lt;result&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;property=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;moduleUser&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;column=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;moduleuser&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;nt&quot;&gt;&amp;lt;/collection&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;/resultMap&amp;gt;&lt;/span&gt;

  &lt;span class=&quot;nt&quot;&gt;&amp;lt;select&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;queryUserPrivilegeByUsername&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;resultMap=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;pojoResultMap2&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
   select   a.id as id ,
      a.username as username ,
      a.password   ,
      a.phone    ,
      a.email,
      a.created,
      a.updated,
      b.module_id as   moduleid ,
      b.user_name as    moduleuser ,
      c.module_name as modulename
      from maintaince_user  a  LEFT JOIN   maintaince_privilege b ON a.username=b.user_name LEFT JOIN maintaince_module c on b.module_id=c.id
      where  a.username=#{username}
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/select&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/mapper&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;小结&lt;/p&gt;

    &lt;p&gt;在用mybatis 绑定内嵌java查询对象，要搞清楚单条sql中字段和java对象属性之间的n 对 n 的关系，并且关联对象往往就是主键或者是具有唯一性的字段，在mapper映射关系中要用&lt;id&gt;来配置。这一部分的编写还是要多多参考官方文档的写法，文档的例子都很实用，务必好好阅读收藏！对于有一定sql基础的人员来说很方便，&lt;/id&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

</description>
        <pubDate>Mon, 06 Mar 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/03/06/java-springmvc-note2/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/03/06/java-springmvc-note2/</guid>
        
        <category>spring</category>
        
        <category>java</category>
        
        <category>web</category>
        
        
      </item>
    
      <item>
        <title>java-web项目问题小结(1)</title>
        <description>&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;em&gt;最近自己在做一个自己的一个项目的，今天基本把框架给打好了，因为是javaweb的应用所以我采用了主流的框架 springMVC + spring + mybatis的主流框架，今天在做的过程中碰到了不少问题，这边做下今天的总结&lt;/em&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;
&lt;h4 id=&quot;导航&quot;&gt;导航&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;1、&lt;a href=&quot;&quot;&gt;关于spring-mvc 配置文件资源加载问题解决&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;2、&lt;a href=&quot;#build2&quot;&gt;jsp服务器端el和客户端js变量传递方法&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;1关于spring-mvc-配置文件资源加载问题解决&quot;&gt;1、关于spring-mvc 配置文件资源加载问题解决&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;在项目中想要运用对应的@value注解来获取env.properties中的值：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; @Controller
 @RequestMapping(&quot;page&quot;)
 public class PageController {
     @Value(&quot;${itmaintaince_SSO_URL}&quot;)
     public   String  itmaintaintaince_SSO_UTL;
     @RequestMapping(value = &quot;{pagename}&quot; , method = RequestMethod.GET)
     public String topage(@PathVariable(&quot;pagename&quot;)String pagename, HttpServletResponse response) throws IOException {
         String loginurl= itmaintaintaince_SSO_UTL+&quot;/public/login.html&quot; ;
         if (pagename.equals(&quot;login&quot;)){
             //转到对应的登录页面
             response.sendRedirect(loginurl);
             return null   ;
         }
	
         return  pagename  ;
     }
 }
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;调试的过程发现没有取到itmaintaince_SSO_URL的值，但是在spring的启动文件里面已经配置了：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &amp;lt;bean class=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&amp;gt;
         &amp;lt;!-- 允许JVM参数覆盖 --&amp;gt;
         &amp;lt;!-- java -Djdbc.url=123 -jar xxx.jar --&amp;gt;
         &amp;lt;property name=&quot;systemPropertiesModeName&quot; value=&quot;SYSTEM_PROPERTIES_MODE_OVERRIDE&quot; /&amp;gt;
         &amp;lt;!-- 忽略没有找到的资源文件 --&amp;gt;
         &amp;lt;property name=&quot;ignoreResourceNotFound&quot; value=&quot;true&quot; /&amp;gt;
         &amp;lt;!-- 配置资源文件 --&amp;gt;
         &amp;lt;property name=&quot;locations&quot;&amp;gt;
             &amp;lt;list&amp;gt;
                 &amp;lt;value&amp;gt;classpath:log4j.properties&amp;lt;/value&amp;gt;
                 &amp;lt;value&amp;gt;classpath:jdbc.properties&amp;lt;/value&amp;gt;
                 &amp;lt;value&amp;gt;classpath:env.properties&amp;lt;/value&amp;gt;
             &amp;lt;/list&amp;gt;
         &amp;lt;/property&amp;gt;
     &amp;lt;/bean&amp;gt;		
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;查资料后，解决方案为在spring-mvc的启动配置文件里面再加载相同的配置文件即可调用该资源，不能加载的原因也和spring的父子容器有关，具体结论如下：&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;1、spring容器初始化（所有的bean）之后，在当前的所在的容器中获取值，然后注入。&lt;/li&gt;
    &lt;li&gt;2、spring容器与spring-mvc的为父子容器，子容器能够访问父容器的资源（bean）示例：controller可以注入service&lt;/li&gt;
    &lt;li&gt;3、父容器不能访问子容器的资源（bean）&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p id=&quot;build2&quot;&gt;&lt;/p&gt;

&lt;h3 id=&quot;2记一次jsp服务器端el和客户端js变量传递方法&quot;&gt;2、记一次jsp服务器端el和客户端js变量传递方法&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;对应的js文件&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &amp;lt;script&amp;gt;
      $(function () {
          var aaa=new Array();
          //这边循环的把对应el表达式中的值加入到客户端js申明的变量数组中去
          &amp;lt;c:forEach items=&quot;${privelige}&quot; var=&quot;mm&quot;&amp;gt;
              aaa.push(&quot;${mm}&quot;);
          &amp;lt;/c:forEach&amp;gt;;
	
  //            var bb = aaa
              MT.checkShow(aaa) ;
      })
  &amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

</description>
        <pubDate>Sun, 05 Mar 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/03/05/java-springmvc-note/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/03/05/java-springmvc-note/</guid>
        
        <category>spring</category>
        
        <category>java</category>
        
        <category>web</category>
        
        <category>js</category>
        
        
      </item>
    
      <item>
        <title>java-web跨域请求解决方案-httpclient</title>
        <description>&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;em&gt;最近一直在学习前段的一些基本前端编程技巧，对于http请求资源的解决方法比较普遍的两种，一种是JSONP，还有另外一种就是今天要介绍的httpclient工具，httpclient是apach基金协会的一个顶级的开源项目&lt;/em&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;
&lt;h4 id=&quot;导航&quot;&gt;导航&lt;/h4&gt;
&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;1、&lt;a href=&quot;&quot;&gt;httpclient工具发送请求（get/post)&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;2、&lt;a href=&quot;#build2&quot;&gt;httpclient建立连接时几个比较重要的参数config&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;3、&lt;a href=&quot;#build3&quot;&gt;httpclient整合spring mvc框架&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;4、&lt;a href=&quot;#build4&quot;&gt;封装对应的api service&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;1httpclient工具发送请求getpost&quot;&gt;1、httpclient工具发送请求（get/post）&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;在maven中添加httpclient所用的到的对应工具包：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &amp;lt;dependency&amp;gt;
   		&amp;lt;groupId&amp;gt;org.apache.httpcomponents&amp;lt;/groupId&amp;gt;
   		&amp;lt;artifactId&amp;gt;httpclient&amp;lt;/artifactId&amp;gt;
   		&amp;lt;version&amp;gt;4.3.5&amp;lt;/version&amp;gt;
   	&amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;httpclient发送get请求：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; package cn.itcast.httpclient;
	
 import java.net.URI;
	
 import org.apache.http.client.methods.CloseableHttpResponse;
 import org.apache.http.client.methods.HttpGet;
 import org.apache.http.client.utils.URIBuilder;
 import org.apache.http.impl.client.CloseableHttpClient;
 import org.apache.http.impl.client.HttpClients;
 import org.apache.http.util.EntityUtils;
	
 public class DoGETParam {
	
     public static void main(String[] args) throws Exception {
	
         // 创建Httpclient对象
         CloseableHttpClient httpclient = HttpClients.createDefault();
	
         // 定义请求的参数
         URI uri = new URIBuilder(&quot;http://www.baidu.com/s&quot;).setParameter(&quot;wd&quot;, &quot;java&quot;).build();
	
         System.out.println(uri);
	
         // 创建http GET请求
         HttpGet httpGet = new HttpGet(uri);
	
         CloseableHttpResponse response = null;
         try {
             // 执行请求
             response = httpclient.execute(httpGet);
             // 判断返回状态是否为200
             if (response.getStatusLine().getStatusCode() == 200) {
                 String content = EntityUtils.toString(response.getEntity(), &quot;UTF-8&quot;);
                 System.out.println(content);
             }
         } finally {
             if (response != null) {
                 response.close();
             }
             httpclient.close();
         }
	
     }
	
 }
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;httpclient发送post请求：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  package cn.itcast.httpclient;
  import java.util.ArrayList;
  import java.util.List;
	
  import org.apache.http.NameValuePair;
  import org.apache.http.client.entity.UrlEncodedFormEntity;
  import org.apache.http.client.methods.CloseableHttpResponse;
  import org.apache.http.client.methods.HttpPost;
  import org.apache.http.impl.client.CloseableHttpClient;
  import org.apache.http.impl.client.HttpClients;
  import org.apache.http.message.BasicNameValuePair;
  import org.apache.http.util.EntityUtils;
	
  public class DoPOSTParam {
  public static void main(String[] args) throws Exception {
          // 创建Httpclient对象
          CloseableHttpClient httpclient = HttpClients.createDefault();
          // 创建http POST请求
          HttpPost httpPost = new HttpPost(&quot;http://www.oschina.net/search&quot;);
          // 设置2个post参数，一个是scope、一个是q
          List&amp;lt;NameValuePair&amp;gt; parameters = new ArrayList&amp;lt;NameValuePair&amp;gt;(0);
          parameters.add(new BasicNameValuePair(&quot;scope&quot;, &quot;project&quot;));
          parameters.add(new BasicNameValuePair(&quot;q&quot;, &quot;java&quot;));
          // 构造一个form表单式的实体
          UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(parameters);
          // 将请求实体设置到httpPost对象中
          httpPost.setEntity(formEntity);
          CloseableHttpResponse response = null;
          try {
              // 执行请求
              response = httpclient.execute(httpPost);
              // 判断返回状态是否为200
              if (response.getStatusLine().getStatusCode() == 200) {
                  String content = EntityUtils.toString(response.getEntity(), &quot;UTF-8&quot;);
                  System.out.println(content);
              }
          } finally {
              if (response != null) {
                  response.close();
              }
              httpclient.close();
          }
	
      }
	
  }
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;建立httpclient的连接池&lt;/p&gt;

    &lt;p&gt;public class HttpConnectManager {&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  public static void main(String[] args) throws Exception {
      PoolingHttpClientConnectionManager cm = new PoolingHttpClientConnectionManager();
      // 设置最大连接数
      cm.setMaxTotal(200);
      // 设置每个主机地址的并发数
      cm.setDefaultMaxPerRoute(20);
      doGet(cm);
      doGet(cm);
  }

  public static void doGet(HttpClientConnectionManager cm) throws Exception {
      //从连接池中哪一个对应的连接
      CloseableHttpClient httpClient = HttpClients.custom().setConnectionManager(cm).build();
      // 创建http GET请求
      HttpGet httpGet = new HttpGet(&quot;http://www.baidu.com/&quot;);

      CloseableHttpResponse response = null;
      try {
          // 执行请求
          response = httpClient.execute(httpGet);
          // 判断返回状态是否为200
          if (response.getStatusLine().getStatusCode() == 200) {
              String content = EntityUtils.toString(response.getEntity(), &quot;UTF-8&quot;);
              System.out.println(&quot;内容长度：&quot; + content.length());
          }
      } finally {
          if (response != null) {
              response.close();
          }
          // 此处不能关闭httpClient，如果关闭httpClient，连接池也会销毁
          // httpClient.close();
      }
  }
  }
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;需要创建一个线程thread自动校验清理无效连接&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  package cn.itcast.httpclient;
	
  import org.apache.http.conn.HttpClientConnectionManager;
  import org.apache.http.impl.conn.PoolingHttpClientConnectionManager;
	
  /**
   * 单独请求对应的方法来关闭对应的请求连接
   *
   *
   */
  public class ClientEvictExpiredConnections {
	
      public static void main(String[] args) throws Exception {
          PoolingHttpClientConnectionManager cm = new PoolingHttpClientConnectionManager();
          // 设置最大连接数
          cm.setMaxTotal(200);
          // 设置每个主机地址的并发数
          cm.setDefaultMaxPerRoute(20);
	
          new IdleConnectionEvictor(cm).start();
      }
	
      public static class IdleConnectionEvictor extends Thread {
	
          private final HttpClientConnectionManager connMgr;
	
          private volatile boolean shutdown;
	
          public IdleConnectionEvictor(HttpClientConnectionManager connMgr) {
              this.connMgr = connMgr;
          }
	
          @Override
          public void run() {
              try {
                  while (!shutdown) {
                      synchronized (this) {
                          wait(5000);
                          // 关闭失效的连接
                          connMgr.closeExpiredConnections();
                      }
                  }
              } catch (InterruptedException ex) {
                  // 结束
              }
          }
	
          public void shutdown() {
              shutdown = true;
              synchronized (this) {
                  notifyAll();
              }
          }
  }
  }
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p id=&quot;build2&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;2httpclient建立连接时几个比较重要的参数config&quot;&gt;2、httpclient建立连接时几个比较重要的参数config&lt;/h3&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package cn.itcast.httpclient;

import org.apache.http.client.config.RequestConfig;
import org.apache.http.client.methods.CloseableHttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClients;
import org.apache.http.util.EntityUtils;

public class RequestConfigDemo {

    public static void main(String[] args) throws Exception {

        // 创建Httpclient对象
        CloseableHttpClient httpclient = HttpClients.createDefault();

        // 创建http GET请求
        HttpGet httpGet = new HttpGet(&quot;http://www.baidu.com/&quot;);

        // 构建请求配置信息
        RequestConfig config = RequestConfig.custom().setConnectTimeout(1000) // 创建连接的最长时间
                .setConnectionRequestTimeout(500) // 从连接池中获取到连接的最长时间
                .setSocketTimeout(10 * 1000) // 数据传输的最长时间
                .setStaleConnectionCheckEnabled(true) // 提交请求前测试连接是否可用
                .build();
        // 设置请求配置信息
        httpGet.setConfig(config);

        CloseableHttpResponse response = null;
        try {
            // 执行请求
            response = httpclient.execute(httpGet);
            // 判断返回状态是否为200
            if (response.getStatusLine().getStatusCode() == 200) {
                String content = EntityUtils.toString(response.getEntity(), &quot;UTF-8&quot;);
                System.out.println(content);
            }
        } finally {
            if (response != null) {
                response.close();
            }
            httpclient.close();
        }

    }

}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p id=&quot;build3&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;3httpclient整合spring-mvc框架&quot;&gt;3、httpclient整合spring mvc框架&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;建立配置参数文件httpclient.properties&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  http.maxtotal=200
  http.setDefaultMaxPerRoute=20
  http.connectTimeout=1000
  http.socketTimeout= 10000
  http.connectionRequestTimeout=500
  http.staleConnectionCheckEnabled=true
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;建立配置文件 applicationContext-httpClient.xml&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
  &amp;lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&amp;gt;
	
       &amp;lt;!--定义连接管理器--&amp;gt;
      &amp;lt;bean id=&quot;connectionManager&quot;  class=&quot;org.apache.http.impl.conn.PoolingHttpClientConnectionManager&quot;&amp;gt;
          &amp;lt;!--最大连接数--&amp;gt;
          &amp;lt;property name=&quot;maxTotal&quot; value=&quot;${http.maxtotal}&quot;/&amp;gt;
          &amp;lt;!--主机并发数量--&amp;gt;
          &amp;lt;property name=&quot;defaultMaxPerRoute&quot; value=&quot;${http.setDefaultMaxPerRoute}&quot;/&amp;gt;
      &amp;lt;/bean&amp;gt;
      &amp;lt;bean  id=&quot;httpClientBuilder&quot; class=&quot;org.apache.http.impl.client.HttpClientBuilder&quot;&amp;gt;
          &amp;lt;property name=&quot;connectionManager&quot; ref=&quot;connectionManager&quot;/&amp;gt;
      &amp;lt;/bean&amp;gt;
      &amp;lt;!--多实例--&amp;gt;
      &amp;lt;bean class=&quot;org.apache.http.impl.client.CloseableHttpClient&quot; factory-bean=&quot;httpClientBuilder&quot;
            factory-method=&quot;build&quot; scope=&quot;prototype&quot;&amp;gt;&amp;lt;/bean&amp;gt;
	
      &amp;lt;bean id=&quot;requestConfigBuilder&quot; class=&quot;org.apache.http.client.config.RequestConfig.Builder&quot;&amp;gt;
          &amp;lt;!--创建连接的最长时间--&amp;gt;
          &amp;lt;property name=&quot;connectTimeout&quot; value=&quot;${http.connectTimeout}&quot;/&amp;gt;
          &amp;lt;!--数据传输的最长时间--&amp;gt;
          &amp;lt;property name=&quot;socketTimeout&quot; value=&quot;${http.socketTimeout}&quot;/&amp;gt;
          &amp;lt;!--从连接池中获取到连接的最长时间--&amp;gt;
          &amp;lt;property name=&quot;connectionRequestTimeout&quot; value=&quot;${http.connectionRequestTimeout}&quot;/&amp;gt;
          &amp;lt;!--提交请求前测试连接是否可用--&amp;gt;
          &amp;lt;property name=&quot;staleConnectionCheckEnabled&quot; value=&quot;${http.staleConnectionCheckEnabled}&quot;  /&amp;gt;
      &amp;lt;/bean&amp;gt;
      &amp;lt;!--请求配置对象(单列)--&amp;gt;
      &amp;lt;bean class=&quot;org.apache.http.client.config.RequestConfig&quot;
            factory-bean=&quot;requestConfigBuilder&quot; factory-method=&quot;build&quot;&amp;gt;&amp;lt;/bean&amp;gt;
            &amp;lt;!--定期关闭无效链接--&amp;gt;
      &amp;lt;bean class=&quot;com.ljpz.common.httpclient.IdleConnectionEvictor&quot;&amp;gt;
          &amp;lt;constructor-arg index=&quot;0&quot; ref=&quot;connectionManager&quot;/&amp;gt;
      &amp;lt;/bean&amp;gt;
  &amp;lt;/beans&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p id=&quot;build4&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;4封装对应的api-service&quot;&gt;4、封装对应的api service&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;package com.ljpz.common.service;
import com.ljpz.common.httpclient.HttpResult;
import org.apache.http.HttpStatus;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.config.RequestConfig;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.CloseableHttpResponse;
import org.apache.http.client.methods.HttpDelete;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.utils.URIBuilder;
import org.apache.http.entity.ContentType;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.util.EntityUtils;
import org.springframework.beans.BeansException;
import org.springframework.beans.factory.BeanFactory;
import org.springframework.beans.factory.BeanFactoryAware;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Required;
import org.springframework.stereotype.Service;
import java.io.IOException;
import java.net.URISyntaxException;
import java.util.ArrayList;
import java.util.List;
import java.util.Map;

/**
 * Created by liujunchen on 2016/12/12.
 */
@Service
public class ApiService implements BeanFactoryAware{
    //这个注解标记为对应可有可无
    @Autowired(required=false )
    private RequestConfig requestConfig;

    //spring初始化是会初始化一个beanFactory
    private  BeanFactory  beanFactory  ;
    /**
     * GET请求地址，响应200 ，返回响应的内容，响应为404  或者500 返回null
     * @param url
     * @return
     * @throws ClientProtocolException
     * @throws IOException
     */
    public  String  doGet(String url ) throws ClientProtocolException,IOException ,URISyntaxException{
        // 创建http GET请求
        HttpGet httpGet = new HttpGet(url);
        httpGet.setConfig(requestConfig);
        CloseableHttpResponse response = null;
        try {
            // 执行请求
           response =getHttpclient().execute(httpGet);
            //返回状态码
            if(response.getStatusLine().getStatusCode()==200){
                return EntityUtils.toString(response.getEntity(),&quot;UTF-8&quot;) ;
            }
        } finally {
            if (response != null) {
                response.close();
            }
        }
        return null;
    }
    public  String doGet(String url , Map&amp;lt;String,String&amp;gt; params) throws  ClientProtocolException, IOException,URISyntaxException{
        //定义请求的参数
        URIBuilder   builder = new URIBuilder(url) ;
        for (Map.Entry&amp;lt;String,String&amp;gt;entry:params.entrySet()){
            builder.setParameter(entry.getKey(),entry.getValue());
        }
        return   this.doGet(builder.build().toString());
    }



    public  Integer doDelete (String url ) throws   ClientProtocolException,IOException ,URISyntaxException{
        //创建httpDelete 请求
        HttpDelete httpDelete  = new HttpDelete(url)  ;
        httpDelete.setConfig(requestConfig);
        CloseableHttpResponse response = null ;
        try {
            //执行请求
            response=getHttpclient().execute(httpDelete)  ;
            //返回状态码
            return  response.getStatusLine().getStatusCode()  ;
        }finally {
            if (response!=null){
                response.close();
            }
        }
    }
    public Integer  doDelete(String url ,Map&amp;lt;String,String&amp;gt;params) throws  ClientProtocolException, IOException,URISyntaxException{
        //定义请求的参数
        URIBuilder builder = new URIBuilder(url)  ;
        for (Map.Entry&amp;lt;String,String&amp;gt;entry:params.entrySet()){
            builder.setParameter(entry.getKey(),entry.getValue());
        }
        return  this.doDelete(builder.build().toString());
    }



    public HttpResult doPost(String url , Map&amp;lt;String , String &amp;gt;params ) throws  ClientProtocolException,IOException,URISyntaxException{
        // 创建http POST请求
        HttpPost httpPost = new HttpPost(url);
        httpPost.setConfig(requestConfig);
        if (null!=params){

            // 设置2个post参数，一个是scope、一个是q
            List&amp;lt;NameValuePair&amp;gt; parameters = new ArrayList&amp;lt;NameValuePair&amp;gt;(0);
            for (Map.Entry&amp;lt;String,String&amp;gt;entry:params.entrySet()){
                parameters.add(new BasicNameValuePair(entry.getKey(),entry.getValue()));
            }
            //构造一个form表单式的实体
            UrlEncodedFormEntity formEntity= new UrlEncodedFormEntity(parameters)  ;
            //将请求实体设置到httpPost对象中
            httpPost.setEntity(formEntity);
        }


        CloseableHttpResponse response = null;
        try {
            // 执行请求
            response = getHttpclient().execute(httpPost);
            return  new HttpResult(response.getStatusLine().getStatusCode(),EntityUtils.toString(response.getEntity(),&quot;UTF-8&quot;));
        } finally {
            if (response != null) {
                response.close();
            }
        }
    }
    public  HttpResult doPost(String url ) throws   ClientProtocolException,IOException,URISyntaxException{
        return  this.doPost(url, null );
    }
    
    private  CloseableHttpClient getHttpclient(){
        return this.beanFactory.getBean(CloseableHttpClient.class) ;
    }

    @Override
    public void setBeanFactory(BeanFactory beanFactory) throws BeansException {
        //该方法实在spring容器初始化时会调用该方法，传入beanFactory函数
        this.beanFactory=beanFactory;
    }
    /**
     * 带有json参数的POST请求
     *
     *
     * @param url
     * @param
     * @return
     * @throws ClientProtocolException
     * @throws IOException
     * @throws URISyntaxException
     */
    public HttpResult doPostJson(String url , String json) throws  ClientProtocolException,IOException,ClientProtocolException{
        HttpPost httpPost = new HttpPost(url);
        httpPost.setConfig(requestConfig);
        if (null!=json){
            StringEntity  stringEntity = new StringEntity(json, ContentType.APPLICATION_JSON);
            //将请求实体设置到httpPost对象中
            httpPost.setEntity(stringEntity);
        }


        CloseableHttpResponse response = null;
        try {
            // 执行请求
            response = getHttpclient().execute(httpPost);
            return  new HttpResult(response.getStatusLine().getStatusCode(),EntityUtils.toString(response.getEntity(),&quot;UTF-8&quot;));
        } finally {
            if (response != null) {
                response.close();
            }
        }
    }



}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

</description>
        <pubDate>Sun, 26 Feb 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/02/26/httprequesthttpclient/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/02/26/httprequesthttpclient/</guid>
        
        <category>实用教程</category>
        
        <category>java</category>
        
        <category>web</category>
        
        
      </item>
    
      <item>
        <title>java-web跨域请求解决方案-jsonp</title>
        <description>&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;em&gt;最近一直在学习前端的一些基本编程技巧，对于http请求资源的解决方法比较普遍的两种，一种就是今天分享的JSONP，还有另外一种就是通过服务器端httpclient工具包进行请求获取资源（明天的内容有了~）&lt;/em&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;1用js加载的方式来解决不能跨域请求资源&quot;&gt;1、用js加载的方式来解决不能跨域请求资源&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;准备一个简单的jsp文件：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &amp;lt;%@page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;
           pageEncoding=&quot;UTF-8&quot;%&amp;gt;
	
 &amp;lt;%
     out.print(&quot;{\&quot;abc\&quot;:123}&quot;);
 %&amp;gt;  返回为json字符串：

 {
     &quot;abc&quot;: 123
 }
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;新建一个html文件：&lt;/p&gt;

    &lt;p&gt;testforjsonp.htm:&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;cp&quot;&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;html&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;lang=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;en&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;charset=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;nt&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;test&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/js/jquery-easyui-1.4.1/jquery.min.js&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;
	
	
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;script&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;nx&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
     &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ajax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
         &lt;span class=&quot;na&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;POST&quot;&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;na&quot;&gt;dataType&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;s2&quot;&gt;&quot;json&quot;&lt;/span&gt;   &lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;na&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8081/json.jsp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
         &lt;span class=&quot;na&quot;&gt;success&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
             &lt;span class=&quot;nx&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;abc&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;//能够正常返回json字符串&lt;/span&gt;
         &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	
     &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
 &lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;浏览 本地地址 http://localhost:8081/testforjsonp.htm 资源都能被访问到（同域当然能够访问）&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://cl.ly/01303s050J2S/Image%202017-02-24%20at%2001.04.36.png&quot; alt=&quot;&quot; /&gt;
  &lt;img src=&quot;https://cl.ly/3F3k1d3A3r0l/Image%202017-02-24%20at%2001.12.56.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;把testforjsonp.htm中加载js的地址改下，放到另外的一个服务容器上面&lt;/p&gt;

    &lt;p&gt;修改js用http地址来获取js：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   &amp;lt;script type=&quot;text/javascript&quot; src=&quot;http://localhost:8081/js/jquery-easyui-1.4.1/jquery.min.js&quot; &amp;gt;&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;

    &lt;p&gt;结果JavaScript的js资源能够正常加载，但是htm因为跨域原因浏览器报错，如下：&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://cl.ly/3B0y331d3x3s/Image%202017-02-24%20at%2001.23.25.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;把对应的ajax请求放在script请求资源的标签中&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;cp&quot;&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;html&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;lang=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;en&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;charset=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;test&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://localhost:8081/js/jquery-easyui-1.4.1/jquery.min.js&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;
	
	
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;script&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://localhost:8081/json.jsp&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;

    &lt;p&gt;结果js加载资源能够正常的解析但由于json.jsp不是js的文本所欲报错&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://cl.ly/3o2k313s0S44/Image%202017-02-24%20at%2001.32.42.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;把对应的json.jsp包装成js的结构&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &amp;lt;%@page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;
            pageEncoding=&quot;UTF-8&quot;%&amp;gt;
	
  &amp;lt;%
      out.print(&quot;fun({\&quot;abc\&quot;:123})&quot;);
  %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;

    &lt;p&gt;在对应的testforjsonp.htm中定义对应的function方法fun:&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;cp&quot;&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;html&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;lang=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;en&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;charset=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;test&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://localhost:8081/js/jquery-easyui-1.4.1/jquery.min.js&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;
	
	
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;script&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  
      &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fun&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;abc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://localhost:8081/json.jsp&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;

    &lt;p&gt;能够正常访问这个就是jsonp的原理！
  &lt;img src=&quot;https://cl.ly/1z1Z0u3b3X36/Image%202017-02-24%20at%2001.41.21.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;用call来传递回调函数，实现跨域访问&lt;/p&gt;

    &lt;p&gt;将json.jsp改写：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &amp;lt;%@page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;
            pageEncoding=&quot;UTF-8&quot;%&amp;gt;
	
  &amp;lt;%
      String callback= request.getParameter(&quot;callback&quot;);
      if (callback ==null|| &quot;&quot;.equals(callback)){
          out.print(&quot;{\&quot;abc\&quot;:123}&quot;);
      }
      else {
          out.print(callback+&quot;({\&quot;abc\&quot;:123})&quot;);
      }
  %&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;

    &lt;p&gt;testforjsonp.htm修改请求加入callback的参数：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;      &lt;span class=&quot;cp&quot;&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;html&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;lang=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;en&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;charset=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;test&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://localhost:8081/js/jquery-easyui-1.4.1/jquery.min.js&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;
	
	
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;script&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fun&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;nx&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;abc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://localhost:8081/json.jsp?callback=fun&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;

    &lt;p&gt;&lt;img src=&quot;https://cl.ly/1z1Z0u3b3X36/Image%202017-02-24%20at%2001.41.21.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;在实际应用中使用JSONP&lt;/p&gt;

    &lt;p&gt;很简单只需在用ajax提供请求把参数dataType改为jsonp即可&lt;/p&gt;

    &lt;p&gt;testforjsonp.htm:&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;cp&quot;&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;html&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;lang=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;en&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;charset=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;title&amp;gt;&lt;/span&gt;test&lt;span class=&quot;nt&quot;&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nt&quot;&gt;&amp;lt;script &lt;/span&gt;&lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/javascript&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;src=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://localhost:8081/js/jquery-easyui-1.4.1/jquery.min.js&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;
	
	
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;script&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;//前面的jquery加载正常&lt;/span&gt;
      &lt;span class=&quot;nx&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ajax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;POST&quot;&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;dataType&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;s2&quot;&gt;&quot;jsonp&quot;&lt;/span&gt;   &lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;url&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;http://localhost:8081/json.jsp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;success&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
              &lt;span class=&quot;nx&quot;&gt;alert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;abc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;//能够正常返回json字符串&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	
      &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/script&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;

    &lt;p&gt;&lt;img src=&quot;https://cl.ly/1m313K0W3s3w/Image%202017-02-24%20at%2002.00.49.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

</description>
        <pubDate>Thu, 23 Feb 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/02/23/httprequestjsonp/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/02/23/httprequestjsonp/</guid>
        
        <category>实用教程</category>
        
        <category>java</category>
        
        <category>web</category>
        
        
      </item>
    
      <item>
        <title>用KindEditor套件实现文件上传功能</title>
        <description>&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;em&gt;本文记录使用KindEditor的web组件实现界面的头像文件上传服务器中，项目基本架构为 spring-mvc  +   spring  +   mybatis加上maven作为项目管理&lt;/em&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;在项目工程中导入对应依赖上传工具包&quot;&gt;在项目工程中导入对应依赖上传工具包&lt;/h3&gt;
    &lt;blockquote&gt;
      &lt;p&gt;我这边使用的&lt;a href=&quot;http://maven.aliyun.com/nexus/#welcome&quot;&gt;阿里的maven远程中央库&lt;/a&gt;&lt;/p&gt;
    &lt;/blockquote&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &amp;lt;!--上传组件依赖--&amp;gt;
  &amp;lt;dependency&amp;gt;
      &amp;lt;groupId&amp;gt;commons-fileupload&amp;lt;/groupId&amp;gt;
      &amp;lt;artifactId&amp;gt;commons-fileupload&amp;lt;/artifactId&amp;gt;
      &amp;lt;version&amp;gt;1.3.1&amp;lt;/version&amp;gt;
  &amp;lt;/dependency&amp;gt;  
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;在spring配置文件中注入对应的文件上传解析器&quot;&gt;在spring配置文件中注入对应的文件上传解析器&lt;/h3&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &amp;lt;!--文件上传解析器--&amp;gt;
  &amp;lt;bean id=&quot;multipartResolver&quot;
  class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&amp;gt;
              &amp;lt;!--最大上传文件大小为5MB--&amp;gt;
              &amp;lt;property name=&quot;maxUploadSize&quot; value=&quot;5242880&quot;/&amp;gt;
  &amp;lt;/bean&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;创建bean-class-picuploadresult&quot;&gt;创建bean Class PicUploadResult&lt;/h3&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  public class PicUploadResult {
      private Integer error;
      private String url;
      private String width;
      private String height;
      public Integer getError() {
          return error;
      }
      public void setError(Integer error) {
          this.error = error;
      }
      public String getUrl() {
          return url;
      }
      public void setUrl(String url) {
          this.url = url;
      }
      public String getWidth() {
          return width;
      }
      public void setWidth(String width) {
          this.width = width;
      }
      public String getHeight() {
          return height;
      }
      public void setHeight(String height) {
          this.height = height;
      }
  }
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;创建资源文件--imag_urlproperties&quot;&gt;创建资源文件  imag_url.properties&lt;/h3&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  REPOSITORY_PATH=/Users/liujunchen/Developer/JavaProject/liujipuzi/ljpz-upload
  IMAGE_BASE_URL=http://localhost:8080
  LJPZ_WEB_URL=http://localhost:8082
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;创建controller-class--picuploadcontroller&quot;&gt;创建controller Class  PicUploadController&lt;/h3&gt;
    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  package com.ljpz.web.controller;
	
  import com.fasterxml.jackson.databind.ObjectMapper;
  import com.ljpz.common.bean.PicUploadResult;
  import com.ljpz.web.service.PropertieService;
  import org.apache.commons.lang3.RandomUtils;
  import org.apache.commons.lang3.StringUtils;
  import org.joda.time.DateTime;
  import org.slf4j.Logger;
  import org.slf4j.LoggerFactory;
  import org.springframework.beans.factory.annotation.Autowired;
  import org.springframework.http.MediaType;
  import org.springframework.stereotype.Controller;
  import org.springframework.web.bind.annotation.RequestMapping;
  import org.springframework.web.bind.annotation.RequestMethod;
  import org.springframework.web.bind.annotation.RequestParam;
  import org.springframework.web.bind.annotation.ResponseBody;
  import org.springframework.web.multipart.MultipartFile;
  import javax.imageio.ImageIO;
  import javax.servlet.http.HttpServletResponse;
  import java.awt.image.BufferedImage;
  import java.io.File;
  import java.io.IOException;
  import java.util.Date;
	
  /**
   * 图片上传
   */
  @Controller
  @RequestMapping(&quot;pic&quot;)
  public class PicUploadController {
      @Autowired
      private PropertieService propertieService  ;
	
      private static final Logger LOGGER = LoggerFactory.getLogger(PicUploadController.class);
	
      private static final ObjectMapper mapper = new ObjectMapper();
	
      // 允许上传的格式
      private static final String[] IMAGE_TYPE = new String[] { &quot;.bmp&quot;, &quot;.jpg&quot;, &quot;.jpeg&quot;, &quot;.gif&quot;, &quot;.png&quot;,&quot;.JPG&quot; };
	
      /**
       * 制定相应的类型
       * @param uploadFile
       * @param response
       * @return
       * @throws Exception
       */
      @RequestMapping(value = &quot;/upload&quot;, method = RequestMethod.POST, produces = MediaType.TEXT_PLAIN_VALUE)
      @ResponseBody
      public String  upload (@RequestParam(&quot;uploadFile&quot;) MultipartFile uploadFile , HttpServletResponse response) throws Exception {
	
          // 校验图片格式
          boolean isLegal = false;
          for (String type : IMAGE_TYPE) {
              if (StringUtils.endsWithIgnoreCase(uploadFile.getOriginalFilename(), type)) {
                  isLegal = true;
                  break;
              }
          }
	
          // 封装Result对象，并且将文件的byte数组放置到result对象中
          PicUploadResult fileUploadResult = new PicUploadResult();
	
          // 状态
          fileUploadResult.setError(isLegal ? 0 : 1);
	
          // 文件新路径
          String filePath = getFilePath(uploadFile.getOriginalFilename());
	
          if (LOGGER.isDebugEnabled()) {
              LOGGER.debug(&quot;Pic file upload .[{}] to [{}] .&quot;, uploadFile.getOriginalFilename(), filePath);
          }
	
          // 生成图片的绝对引用地址
          String picUrl = StringUtils.replace(StringUtils.substringAfter(filePath, propertieService.REPOSITORY_PATH), &quot;\\&quot;, &quot;/&quot;);
          fileUploadResult.setUrl(propertieService.IMAGE_BASE_URL + picUrl);
	
          File newFile = new File(filePath);
	
          // 写文件到磁盘
          uploadFile.transferTo(newFile);
	
          // 校验图片是否合法
          isLegal = false;
          try {
              BufferedImage image = ImageIO.read(newFile);
              if (image != null) {
                  fileUploadResult.setWidth(image.getWidth() + &quot;&quot;);
                  fileUploadResult.setHeight(image.getHeight() + &quot;&quot;);
                  isLegal = true;
              }
          } catch (IOException e) {
          }
	
          // 状态
          fileUploadResult.setError(isLegal ? 0 : 1);
	
          if (!isLegal) {
              // 不合法，将磁盘上的文件删除
              newFile.delete();
          }
	
          //将java对象序列化成Json字符串
          return mapper.writeValueAsString(fileUploadResult);
      }
	
      private String getFilePath(String sourceFileName) {
          String baseFolder = &quot;/Users/liujunchen/Developer/JavaProject/liujipuzi/ljpz-upload&quot; + File.separator + &quot;images&quot;;
          Date nowDate = new Date();
          // yyyy/MM/dd
          String fileFolder = baseFolder + File.separator + new DateTime(nowDate).toString(&quot;yyyy&quot;) + File.separator + new DateTime(nowDate).toString(&quot;MM&quot;) + File.separator
                  + new DateTime(nowDate).toString(&quot;dd&quot;);
          File file = new File(fileFolder);
          if (!file.isDirectory()) {
              // 如果目录不存在，则创建目录
              file.mkdirs();
          }
          // 生成新的文件名
          String fileName = new DateTime(nowDate).toString(&quot;yyyyMMddhhmmssSSSS&quot;) + RandomUtils.nextInt(100, 9999) + &quot;.&quot; + StringUtils.substringAfterLast(sourceFileName, &quot;.&quot;);
          return fileFolder + File.separator + fileName;
      }
	
  }
	
	
	
	
  * 在test的类里注射spring bean测试程序如下：
	
			
          @RunWith(SpringJUnit4ClassRunner.class)
          //加载配置文件
          @ContextConfiguration
                  ({&quot;/spring/applicationContext.xml&quot;,&quot;/spring/applicationContext-mybatis.xml&quot;})
          public class UserinfoServiceTest {
              private   static  final ObjectMapper   MAPPER = new ObjectMapper()   ;
              private   String  tojson   ;
              @Resource
              private   UserinfoService  userinfoService ;
			
              @Before
              public void setTojson() throws Exception {
                  //准备一条测试数据
                  this.tojson= MAPPER.writeValueAsString(
                          new Userinfo( new Long(109),&quot;junchen-test222&quot;,  &quot;1&quot;,  new Date(),
                                  &quot;刘俊辰&quot;,  &quot;大海&quot;, null, &quot;1&quot;, &quot;100000000&quot;, &quot;310107&quot;, &quot;本科&quot;, &quot;计算机test&quot;));
              }
              @Test
              public void createUserinfo() throws Exception {
                  userinfoService.createUserinfo(tojson)  ;
			
              }
			
              @Test
              public void updateUserinfo() throws Exception {
			
                   userinfoService.updateUserinfo(tojson);
              }
			
              @Test
              public void queryByNickname() throws Exception {
			
                 /* 传统办法
                  ApplicationContext applicationContext = new ClassPathXmlApplicationContext(
                          &quot;spring/applicationContext.xml&quot;,&quot;spring/applicationContext-mybatis.xml&quot;);
                  UserinfoService  userinfoService=
                          applicationContext.getBean(&quot;userinfoService&quot;,UserinfoService.class)  ;*/
			
                  Userinfo userinfo   =  userinfoService.queryByNickname(new Long(9));
                  System.out.println(userinfo.toString());
	
      }
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;在页面导入css以及kindedit工具js&quot;&gt;在页面导入css以及kindedit工具js&lt;/h3&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &amp;lt;%--上传组件--%&amp;gt;
  &amp;lt;link rel=&quot;stylesheet&quot; href=&quot;/js/kindeditor-4.1.7/themes/default/default.css&quot; /&amp;gt;
  &amp;lt;script src=&quot;/js/kindeditor-4.1.7/kindeditor-min.js&quot;&amp;gt;&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;在页面中添加js代码自己也是刚刚接触前段简要的注释下调用的js过程&quot;&gt;在页面中添加js代码（自己也是刚刚接触前段简要的注释下调用的js过程）&lt;/h3&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &amp;lt;script&amp;gt;
         $(function() {
          var uploadbutton = KindEditor.uploadbutton({
              button : $('#uploadButton')[0],//上传button按钮
              fieldName : 'uploadFile',//类型为uploadFile这个是富文本插件参数
              url : '/service/pic/upload?dir=image',//送请求响应地址
                      afterUpload : function(data) {
                          if (data.error === 0) {
                              var url = KindEditor.formatUrl(data.url, 'absolute');
                              var tagurl= &quot;&amp;lt;img id='bigImage' name='bigImage' alt=''  width='150' height='150' src='&quot;+url+&quot;'&amp;gt;&quot;;
                              var   img2url   = &quot;&amp;lt;img id='midImage' width='100' height='100' name='midImage' src='&quot;+ url   + &quot;'&amp;gt;&quot;
                              var   img3url   = &quot;&amp;lt;img id='smaImage' width='50' height='50' name='smaImage' src='&quot;+ url   + &quot;'&amp;gt;&quot;
                              $('#url').val(url);
                              //在网页中添加更新上传头像
                              $(&quot;.img-b&quot;).html(tagurl)  ;
                              $(&quot;.img-s&quot;).eq(0).html(img2url)  ;
                              $(&quot;.img-s&quot;).eq(1).html(img3url)  ;
                          } else {
                              alert(data.message);
                  }
              },
              afterError : function(str) {
                  alert('自定义错误信息: ' + str);
              }
          });
          uploadbutton.fileBox.change(function(e) {
              uploadbutton.submit();
          });
      });
  &amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;h3 id=&quot;js成功调用截图&quot;&gt;js成功调用截图&lt;/h3&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://cl.ly/0o0U1A073S2I/Image%202017-02-23%20at%2010.19.41.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

</description>
        <pubDate>Tue, 21 Feb 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/02/21/imageupload/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/02/21/imageupload/</guid>
        
        <category>实用教程</category>
        
        <category>java</category>
        
        
      </item>
    
      <item>
        <title>用junit测试单个服务调用</title>
        <description>&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;em&gt;spring测试很费劲需要初始化bean才能进行测试， 这边介绍spring-test 配合junit来完成对应service的接口测试&lt;/em&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;测试环境搭建过程&quot;&gt;测试环境搭建过程&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;我本机环境是2014年 retina mac pro,编程工具为idea，项目中用的是maven，所以下面的介绍是基于maven的。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;在maven中添加对应spring 的测试的依赖包&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &amp;lt;dependency&amp;gt;
      &amp;lt;groupId&amp;gt;junit&amp;lt;/groupId&amp;gt;
      &amp;lt;artifactId&amp;gt;junit&amp;lt;/artifactId&amp;gt;
  &amp;lt;/dependency&amp;gt;

       &amp;lt;dependency&amp;gt;
              &amp;lt;groupId&amp;gt;org.springframework&amp;lt;/groupId&amp;gt;
              &amp;lt;artifactId&amp;gt;spring-test&amp;lt;/artifactId&amp;gt;
              &amp;lt;version&amp;gt;4.1.3.RELEASE&amp;lt;/version&amp;gt;
          &amp;lt;/dependency&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;找到测试类添加如下的注解注入bean&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;          @RunWith(SpringJUnit4ClassRunner.class)
          //加载配置文件
          @ContextConfiguration
                  ({&quot;/spring/applicationContext.xml&quot;,&quot;/spring/applicationContext-mybatis.xml&quot;})
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;在test的类里注射spring bean测试程序如下：&lt;/p&gt;

    &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  @RunWith(SpringJUnit4ClassRunner.class)
  //加载配置文件
  @ContextConfiguration
          ({&quot;/spring/applicationContext.xml&quot;,&quot;/spring/applicationContext-mybatis.xml&quot;})
  public class UserinfoServiceTest {
      private   static  final ObjectMapper   MAPPER = new ObjectMapper()   ;
      private   String  tojson   ;
      @Resource
      private   UserinfoService  userinfoService ;
	
      @Before
      public void setTojson() throws Exception {
          //准备一条测试数据
          this.tojson= MAPPER.writeValueAsString(
                  new Userinfo( new Long(109),&quot;junchen-test222&quot;,  &quot;1&quot;,  new Date(),
                          &quot;刘俊辰&quot;,  &quot;大海&quot;, null, &quot;1&quot;, &quot;100000000&quot;, &quot;310107&quot;, &quot;本科&quot;, &quot;计算机test&quot;));
      }
      @Test
      public void createUserinfo() throws Exception {
          userinfoService.createUserinfo(tojson)  ;
	
      }
	
      @Test
      public void updateUserinfo() throws Exception {
	
           userinfoService.updateUserinfo(tojson);
      }
	
      @Test
      public void queryByNickname() throws Exception {
	
         /* 传统办法
          ApplicationContext applicationContext = new ClassPathXmlApplicationContext(
                  &quot;spring/applicationContext.xml&quot;,&quot;spring/applicationContext-mybatis.xml&quot;);
          UserinfoService  userinfoService=
                  applicationContext.getBean(&quot;userinfoService&quot;,UserinfoService.class)  ;*/
	
          Userinfo userinfo   =  userinfoService.queryByNickname(new Long(9));
          System.out.println(userinfo.toString());

  }
&lt;/code&gt;&lt;/pre&gt;
    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;运行你想运行test的程序就行。&lt;/p&gt;

    &lt;p&gt;&lt;img src=&quot;https://cl.ly/2A3d0T1u2q1h/Image%202017-02-21%20at%2001.13.34.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

</description>
        <pubDate>Mon, 20 Feb 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/02/20/springtest-configuration/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/02/20/springtest-configuration/</guid>
        
        <category>实用教程</category>
        
        <category>java</category>
        
        
      </item>
    
      <item>
        <title>2017nba全明星东部先发盘点</title>
        <description>&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;em&gt;2017年nba全明星正赛就要开打，今天的三分和灌篮大赛有点让大家失望了，两个卫冕冠军发挥失常让我们一头雾水，好了~今天继续带来nba allstar东部五虎将的首发巡礼&lt;/em&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;西部&quot;&gt;西部&lt;/h1&gt;

&lt;h2 id=&quot;前锋-勒布朗詹姆斯&quot;&gt;前锋 勒布朗.詹姆斯&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://cl.ly/1r1N1r463l1l/Image%202017-02-19%20at%2022.21.44.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;去年史诗逆转夺冠后，lbj已经是当今联盟第一人，现在他还是处于自己职业生涯的巅峰。&lt;/p&gt;

&lt;p&gt;lbj是非常努力的球员，之前最为人所诟病应该是他的投篮吧，之前的投篮姿势非常的难看，但是经过几个赛季的打磨，现在lbj投篮姿势已经改变了不少，远距离投射越来越稳定。lbj就是一块刚，非常的强硬，和同时期进入nba的小甜瓜对比一下就知道lbj是多么的努力。lbj不大受伤要归功于他良好的身体力量。从侧面也能看出lbj真的是非常努力，这里让我想起了灌篮高手里面的牧绅一渴望胜利，对于胜利保持着永久的饥渴。在球场上lbj全面到可以胜任除了中锋以外任何的一个位置，这是他的13次全明星的比赛，lbj的职业生涯已经可以用伟大来形容了。&lt;/p&gt;

&lt;h2 id=&quot;后卫-凯里欧文&quot;&gt;后卫 凯里.欧文&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://cl.ly/1V3j3t2B0W13/Image%202017-02-19%20at%2022.46.09.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;德鲁大叔永远出现在视频剪辑中，freestyle的风格深入他的骨髓，笔者非常欣赏的一位球员。&lt;/p&gt;

&lt;p&gt;欧文的特点非常鲜明那就是进攻，他的武器库齐全，进攻手段丰富。很多进攻技巧他都运用的玲离尽致，其中转陀螺和拜佛两个技术被他发扬了光大，就好比当年哈达威把crossover发扬光大一样，欧文的球风潇洒惬意。这两个赛季关键时刻的他成了lbj后不二选择。&lt;/p&gt;

&lt;h2 id=&quot;前锋-吉米巴特勒&quot;&gt;前锋 吉米.巴特勒&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://cl.ly/1T3b261p3i3l/Image%202017-02-19%20at%2023.09.28.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;本赛季罗斯的出走彻底扶正了吉米.巴特勒。吉米的身体素质很棒。球风和lbj很相似其实，一个字 &lt;strong&gt;刚&lt;/strong&gt;。充满力量的吉米个人觉得还是应该在加强一下外线三分的能力，现在谁没有一手三分啊~你说是不是啊~&lt;/p&gt;

&lt;h2 id=&quot;后卫-德玛尔德罗赞&quot;&gt;后卫 德玛尔.德罗赞&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://cl.ly/1h1F373c373S/Image%202017-02-19%20at%2023.26.18.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;德罗赞在我的数据库中原本就是个扣将，本赛季看过猛龙的一次比赛，德罗赞全面的能力让我刮目相看，尤其是中距离的转身跳投，让我有一种mj的错觉。&lt;/p&gt;

&lt;h2 id=&quot;前锋-字母哥甘尼斯阿德托昆博&quot;&gt;前锋 字母哥(甘尼斯·阿德托昆博)&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://cl.ly/2q2j0D2z4634/Image%202017-02-19%20at%2023.36.16.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;字母哥身形上面非常像杜兰特，身体条件非常的优秀，只是有一处致命伤那就是没有外线的投射能力，看下每次雄鹿的赛后统计你就会知道这支球队是多么缺好的射手了。字母哥如果夏天好好的强化下三分就凭他的身体素质一定能够成就一番大业！&lt;/p&gt;

</description>
        <pubDate>Sun, 19 Feb 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/02/19/chat-NBA-2/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/02/19/chat-NBA-2/</guid>
        
        <category>篮球</category>
        
        
      </item>
    
      <item>
        <title>2017nba全明星西部先发盘点</title>
        <description>&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;em&gt;2017年nba全明星如期而至，现在的nba很疯狂，快速~进攻是nba的主题，下面我就谈谈个人对于本届全明星10首发的看法&lt;/em&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;h1 id=&quot;西部&quot;&gt;西部&lt;/h1&gt;

&lt;h2 id=&quot;后卫-斯蒂芬库里&quot;&gt;后卫 斯蒂芬.库里&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://cl.ly/140s2t3p1S0B/Image%202017-02-19%20at%2001.25.49.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;看图就知道他的杀手锏，不用多说，他是继艾弗森之后又一个改变我对于篮球理解的球星。&lt;/p&gt;

&lt;p&gt;个人技巧方面来看他的投篮并不是教科书般的标准，但是这正是他的一大杀手锏，出手点偏低但异常迅速、与生俱来的柔和的手感，定点或者接球三分nba里面他不一定是最棒的，但我确定他一定是持球三分历史以来最好的球员没有之一。他的运球很棒没有欧文那样”骚气”但是确是nba最好的，刻苦有针对性的训练让他人球合一，有些人或许会质疑库里是不是球风偏软，在我看来强硬了就不是库里了，他的打法如水很柔让人看起来很舒服，其实我觉得保持这样的球风是要付出受伤代价的，但是如果把自己身体力量练上去了势必会失去灵动，两者没有办法兼得，上赛季的库里真的不可思议。今年维斯的落选很冤，但是库里的球风独一无二他首发我没意见。&lt;/p&gt;

&lt;h2 id=&quot;后卫-詹姆斯哈登&quot;&gt;后卫 詹姆斯.哈登&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://cl.ly/0z3d2q0B3F2M/Image%202017-02-19%20at%2001.27.18.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;标志性动作撒点盐~就如广告中所宣传的一样，哈登确实很独特，本赛季脱离了场外的纷纷扰扰~系统训练后的夜店登表现出了mvp的竞争力。&lt;/p&gt;

&lt;p&gt;个人技巧方面哈登独步武林的秘诀我觉得应该就是他的节奏了。本赛季打组织的他有了更多的球权让他把这个特点发挥了更大的作用。我自己也在研究他的节奏独特的原因，个人分析原因有二，一是他是左手球员对于大多数人来说看左手球员多多少少有点不习惯，其次我想应该是和他自己突破的风格有很大的关系，哈登喜欢身体接触并且会利用身体接触后急停或者再发力来制造得分的机会，和库里的持球三分一样~哈登的黏人碰瓷打法确实也是独一无二。&lt;/p&gt;

&lt;h2 id=&quot;前锋-凯文杜兰特&quot;&gt;前锋 凯文.杜兰特&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://cl.ly/3O1a2e11123R/Image%202017-02-19%20at%2001.56.45.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;本赛季加盟勇士，杜兰特变得更加的高效。&lt;/p&gt;

&lt;p&gt;单打永远给人一种错位的感觉，超高的出手高度，那么高的身高还拥有较好的持球突破，如果硬是要找点缺点的话那就是长得还不是很有腔调吧。我看杜兰特比赛的时候一直有种感觉就是到了最后才发现他得了30多分啊~心里却嘀咕着他没怎么打~这就是杜兰特，全面而高效。&lt;/p&gt;

&lt;h2 id=&quot;前锋-考瓦伊-莱昂纳德&quot;&gt;前锋 考瓦伊-莱昂纳德&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://cl.ly/25183A3U1v22/Image%202017-02-19%20at%2002.16.07.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;GDP言传身教，再加上波波的指点让他好像没有经历过年轻打法直接过度到了最为实用的球风。&lt;/p&gt;

&lt;p&gt;卡哇伊的臂展也是长的过分，个人的防守是他的一大法宝，身体素质一流。进攻方面今年的卡哇伊更加的高效，在如今联盟三分小球风暴横行，背身单打跳投的两分技术这项技术被很多人遗忘，没关系联盟还有卡哇伊 和猛龙的德罗赞的，卡哇伊的主要进攻手段就像马刺一样经典，背身靠打让我依稀看到了乔丹的影子。能力已经具备，但是他还需要学习如何去当一个领袖。&lt;/p&gt;

&lt;h2 id=&quot;前锋中锋-安东尼-戴维斯&quot;&gt;前锋/中锋 安东尼-戴维斯&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://cl.ly/3e061y2G3439/Image%202017-02-19%20at%2002.34.08.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;浓眉哥现代篮球打法nba中最好的中锋。&lt;/p&gt;

&lt;p&gt;个人技巧方面他的投篮移动防守能力都是nba顶尖水平，本赛季个人数据非常好看。无奈队友有点坑啊~他有一手中投，移动好，攻防两端的强点。但是他确实缺失了背打这项我认为一个伟大中锋必须拥有的技能，或许时代变了背打这项技术用的越来越少，但是个人为最难篮球技巧是个人跳投和背身单打。&lt;/p&gt;

</description>
        <pubDate>Sat, 18 Feb 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/02/18/chat-NBA/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/02/18/chat-NBA/</guid>
        
        <category>篮球</category>
        
        
      </item>
    
  </channel>
</rss>
